<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>タグ管理画面</title>
         <link rel="stylesheet" type="text/css" href="css/tag.css">
</head>
<body>
    <h1>
        タグ管理
    </h1>

    <div id="search-box">
        <input type="text" class="search-input" id="search-input" placeholder="検索">
    </div>

    <div id="all-tag-types-holder">

        <div class="type-holder">
            <p class="type-intro">メーカー</p>
            <div class="types-button-holder">
                <div class="tag-container">
                    <form action="#" method="post"><button class="tag"><p class="tag-text">森永</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">ロッテ</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">井村屋</p><span class="tag-close">✕</span></button></form>
                </div>
                <div class="add-button-holder">
                    <button type="button" class="add-button normal-button" onclick="openPopup('メーカーを追加する')">＋追加</button>
                </div>
            </div>
        </div>

        <div class="type-holder">
            <p class="type-intro">種類</p>
            <div class="types-button-holder">
                <div class="tag-container">
                    <form action="#" method="post"><button class="tag"><p class="tag-text">アイスバー</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">アイスクリーム</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">アイス大福</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">氷菓</p><span class="tag-close">✕</span></button></form>
                </div>
                <div class="add-button-holder">
                    <button type="button" class="add-button normal-button" onclick="openPopup('種類を追加する')">＋追加</button>
                </div>
            </div>
        </div>

        <div class="type-holder">
            <p class="type-intro">味</p>
            <div class="types-button-holder">
                <div class="tag-container">
                    <form action="#" method="post"><button class="tag"><p class="tag-text">イチゴ</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">チョコ</p><span class="tag-close">✕</span></button></form>
                    <form action="#" method="post"><button class="tag"><p class="tag-text">パクチー</p><span class="tag-close">✕</span></button></form>
                </div>
                <div class="add-button-holder">
                    <button type="button" class="add-button normal-button" onclick="openPopup('味を追加する')">＋追加</button>
                </div>
            </div>
        </div>

    </div>
               
    <div id="modoru-holder">
        <form action="main.html" method="post">
            <button id="modoru" class="normal-button">戻る</button>
        </form>
    </div>

    <div id="black-background" onclick="closePopup()">

    </div>

    <div id="add-popup">
        <form action="#" method="post" id="add-form">

            <div id="add-top">
                <h3>を追加する</h3>
            </div>
            
            <div id="add-center">
                <input type="text" name="tag" id="tag-search" required>
            </div>

            <div id="add-bottom">
                <button type="button" onclick="closePopup()">キャンセル</button>
                <button type="submit">追加</button>
            </div>

        </form>
    </div>

    <script>
        let tags = Array.from(document.getElementsByClassName("tag-text"));
        let tagBoxes = Array.from(document.getElementsByClassName("tag"));
        let searchBox = document.getElementById("search-input");
        searchBox.addEventListener("input", applySearch);

        function applySearch(){
            for (let i = 0; i < tags.length; i++) {
                const tagText = tags[i];
                if(tagText.innerHTML.includes(searchBox.value)){
                    tagBoxes[i].style.display = "flex";
                } else {
                    tagBoxes[i].style.display = "none";

                }
            }
        }

        function openPopup(text){
            let popupTitle = document.getElementsByTagName("h3")[0];
            popupTitle.innerHTML = text;
            document.getElementById("black-background").style.display = "flex";
            document.getElementById("add-popup").style.display = "flex";
        }
        
        function closePopup(){
            document.getElementById("black-background").style.display = "none";
            document.getElementById("add-popup").style.display = "none";

        }
    </script>
</body>
</html>